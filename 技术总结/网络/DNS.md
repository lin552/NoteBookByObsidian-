---
创建时间: 2025-04-15 22:29:29
作者: wangxiaoming
tags:
  - DNS
---

#### 一、`DNS`基础概念
`DNS（Domain Name System,域名系统）`是互联网的核心服务，本质是一个分布式数据库，负责将人类易记域的域名（如  `www.example.com`）转换为计算机可识别的IP地址（如 `192.0.2.1`）其核心功能包括：
- 域名解析：实现域名与IP地址的双向映射
- 分层管理：域名空间采用树状机构，分为根域、顶级域（如 `.com`、`.cn`）、二级域（如 `example.com`）等
- 分布式设计：避免单点故障，全球`DNS`服务器分为根服务器、顶级域服务器、权威服务地和本地`DNS`服务器
#### 二、`DNS`解析流程
`DNS`解析分为递归查询（客户端到本地`DNS`）和迭代查询（本地`DNS`到其他服务器）两种模式，具体流程如下
##### 1）本地缓存检查：
浏览器缓存->操作系统缓存->Hosts文件->本地`DNS`缓存。
##### 2）递归查询阶段（客户端->本地`DNS`）
本地`DNS`若缓存未命中，向根域名服务器发起请求
##### 3）迭代查询阶段（本地`DNS`->各级服务器）
**根服务器**返回顶级域服务器地址（如 `.com`的服务器）-> **顶级域服务器**返回权威服务器地址（如 `example.com` 的服务器）-> **权威服务器**返回最终IP地址

递归与迭代对比：

|​**特性**​|递归查询（客户端→本地DNS）|迭代查询（本地DNS→其他服务器）|
|---|---|---|
|​**责任主体**​|本地DNS完成全流程|逐级返回下一跳地址|
|​**响应方式**​|必须返回最终结果|返回下一级服务器地址或结果|
|​**应用场景**​|客户端与本地DNS之间|DNS服务器间协作|
#### 三、`DNS`核心机制与面试考点
##### 1）`DNS`记录类型
- `A记录`：`IPv4`地址映射（如 `www.example.com -> 192.0.2.1`）
- `AAAA记录`：`IPv6`地址映射（如 `2001:db8::1`）
- `CNAME`：域名别名 （如 `blog.example.com -> example.com`）
- `MX记录`：邮件服务器地址 （如 `mail.example.com`）
- `NS记录`：指定权威`DNS`服务器
- `TTL(Time to Live)`：控制缓存有效期（如3600秒），优化解析效率
##### 2）缓存机制与优化
- **多级缓存**：浏览器、操作系统、本地`DNS`均缓存结果，减少重复查询
- **缓存刷新策略**：`TTL`到期后重新查询，手动刷新可通过 `ipconfig/flushdns`（Windows）或 `systemd-resolve --flush-caches`（Linux）
##### 3）安全威胁与防护
- **`DNS`劫持**：篡改解析结果，导向恶意IP。解决方案：使用`DNSSEC`（数字签名验证）或加密协议（`DNS over HTTPS/TLS`）
- **缓存投毒**：伪造`DNS`响应污染缓存。解决方案：禁用递归查询，使用可信`DNS`（如 `Cloudflare 1.1.1.1`）
- **`DDoS`攻击**：通过大量请求瘫痪`DNS`服务器。解决方案：流量清洗、对节点负载均衡
##### 4）高级功能
**智能解析**：根据用户地理位置或运营商返回最优IP（`CDN`场景）
**`DNSSEC`**：通过数字签名确保数据完整性，防止中间人攻击
`EDNS-Client-Subnet`:传递用户IP子网信息，提升`CDN`调度精度

#### 四、高频面试题及回答策略
##### 1）`DNS`解析过程是怎么样的？
回答：按“本地缓存->递归查询->迭代查询”流程，强调分层解析与缓存机制
##### 2）递归查询与迭代查询的区别？
回答：递归有本地`DNS`全权处理，迭代需逐级查询；前者用户客户端-本地`DNS`，后者用于服务器间协作
##### 3）如何解决`DNS`劫持？
回答：启用`DNSSEC`验证、使用加密协议（`DoH/DoT`）、选择可信`DNS`服务
##### 4）`TTL`的作用是什么？
回答：控制缓存时间，平衡解析效率与数据更新延迟（短`TTL`加快更新，长`TTL`减少查询）
##### 5）`CDN`与`DNS`的关系？
回答：`CDN`通过`DNS`智能解析（如`CNAME`记录）将用户路由到最近的边缘节点，加速内容分发