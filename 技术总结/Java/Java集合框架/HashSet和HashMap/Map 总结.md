---
创建时间: 2025-04-12 17:24:57
作者: wangxiaoming
tags:
  - Map
---
#### 一、Map特性对比

| ​**特性**​          | ​**HashMap**​  | ​**LinkedHashMap**​               | ​**TreeMap**​                     | ​**ConcurrentHashMap**​ | ​**ConcurrentSkipListMap**​                       | ​**Hashtable**​   |
| ----------------- | -------------- | --------------------------------- | --------------------------------- | ----------------------- | ------------------------------------------------- | ----------------- |
| ​**底层数据结构**​      | 哈希表（数组+链表/红黑树） | 哈希表+双向链表                          | 红黑树                               | 分段锁+哈希表                 | 跳表（SkipList）                                      | 哈希表（全表锁）          |
| ​**元素顺序**​        | 无序             | 插入顺序或访问顺序（可选）                     | 自然排序或自定义比较器排序                     | 无序                      | 自然排序或自定义比较器排序                                     | 无序                |
| ​**时间复杂度**​       | 插入/查找：均摊 O(1)  | 插入/查找：均摊 O(1)                     | 插入/查找：O(log n)                    | 插入/查找：均摊 O(1)（分段锁）      | 插入/查找：O(log n)                                    | 插入/查找：均摊 O(1)（全锁） |
| ​**线程安全**​        | 非线程安全          | 非线程安全                             | 非线程安全                             | 线程安全（高并发优化）             | 线程安全（无锁并发）                                        | 线程安全（同步方法）        |
| ​**允许 Null 键/值**​ | 允许键值均为null     | 允许键值均为null                        | 键不允许null，值允许                      | 键值均不允许null              | 键值均不允许null                                        | 键值均不允许null        |
| ​**内存占用**​        | 中等             | 较高（维护双向链表）                        | 较低（树结构紧凑）                         | 中等                      | 较高（多层跳表索引）                                        | 中等                |
| ​**特殊功能**​        | -              | 支持LRU缓存淘汰策略                       | 支持范围查询（subMap）                    | 高并发读写分段锁                | 支持高并发范围查询                                         | 遗留类，不推荐使用         |
| obsidian链         | [[HashMap]]    | [[LinkedHashMap 和 LinkedHashSet]] | [[TreeMap 和 TreeSet#1）`TreeMap`]] | [[ConcurrentHashMap]]   | [[ConcurrentSkipListMap 和 ConcurrentSkipListSet]] |                   |
#### 二、适用场景
##### ① 基于排序需求
###### 1. ​**无需排序，仅需快速存取**​
- ​**选择 `HashMap`**​
    - ​**技术优势**​：哈希表实现，插入/查找均摊 O(1)，适合高频操作
    - ​**适用场景**​：缓存实现、键值对快速查询（如用户会话存储）。
    - ​**限制**​：无序，线程不安全。
###### 2. ​**需保留插入顺序或访问顺序**​
- ​**选择 `LinkedHashMap`**​
    - ​**技术优势**​：通过双向链表维护顺序，支持`LRU`缓存淘汰策略
    - ​**适用场景**​：需要记录操作顺序（如最近访问记录）、实现`LRU`缓存。
###### 3. ​**需自然或自定义排序**​
- ​**选择 `TreeMap` 或 `ConcurrentSkipListMap`**​
    - ​**技术差异**​：
        - `TreeMap`：基于红黑树，单线程下效率高，支持范围查询
        - `ConcurrentSkipListMap`：基于跳表，支持并发有序操作，范围查询效率极佳
    - ​**适用场景**​：
        - `TreeMap`：单线程有序集合（如按时间排序的事件日志）。
        - `ConcurrentSkipListMap`：高并发有序集合（如实时排行榜、范围查询频繁的系统）。

##### ② 基于并发需求
###### 1. ​**高并发读写场景**​
- ​**选择 `ConcurrentHashMap`**​
    - ​**技术优势**​：分段锁机制，支持高并发读写，性能优于 `Hashtable`
    - ​**适用场景**​：多线程环境下的共享缓存（如电商库存计数）。
###### 2. ​**高并发有序操作**​
- ​**选择 `ConcurrentSkipListMap`**​
    - ​**技术优势**​：无锁跳表结构，支持并发范围查询和排序
    - ​**适用场景**​：多线程下的有序数据结构（如分布式任务调度）。

##### ③ 基于内存与特殊需求

###### 1. ​**内存敏感场景**​

- ​**选择 `HashMap` 或 `TreeMap`**​
    - `HashMap`：哈希表结构紧凑，适合通用场景
    - `TreeMap`：红黑树内存占用较低，适合有序但数据量较小的场景
###### 2. ​**弱引用键管理**​
- ​**选择 `WeakHashMap`**​
    - ​**技术优势**​：键为弱引用，GC自动回收无引用的键值对
    - ​**适用场景**​：临时缓存（如动态生成的配置项）。

##### ④ 总结
- ​**无序 + 高性能**​ → `HashMap`
- ​**插入/访问顺序**​ → `LinkedHashMap`
- ​**排序 + 单线程**​ → `TreeMap`
- ​**排序 + 高并发**​ → `ConcurrentSkipListMap`
- ​**高并发读写**​ → `ConcurrentHashMap`
- ​**遗留场景**​ → `Hashtable`（不推荐）